import React from 'react';
import PropTypes from 'prop-types';
import { createPortal } from 'react-dom';

/**
 * Utility component that will render its children in a portal to the target element
 *
 * @example <Teleporter target="#modal-root"><ModalV2 /></Teleporter>
 */
const Teleporter = (props) => {
  let el = null;
  if (typeof props.target === 'string') {
    el = document.querySelector(props.target);
  } else if (props.target) {
    el = props.target;
  }

  if (el) {
    return createPortal((
      <>
        {props.children}
      </>
    ), el);
  }

  return props.children;
};

Teleporter.defaultProps = {
  children: null,
  target: null,
};

Teleporter.propTypes = {
  children: PropTypes.oneOfType([PropTypes.node, PropTypes.arrayOf(PropTypes.node)]),
  target: PropTypes.oneOfType([
    PropTypes.instanceOf(HTMLElement),
    PropTypes.element,
    PropTypes.string,
  ]),
};

export default Teleporter;
