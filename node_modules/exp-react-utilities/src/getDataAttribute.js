import property from 'lodash/property';

// This version of getDataAttribute can search ancestors until it finds one or reaches the document.
const getDataAttribute = (e, attr, searchAncestors) => {
  if ((e || {}).nodeType !== 1) { // is it a dom element?
    return undefined;
  }
  const found = property(`dataset.${attr}`)(e) || e.getAttribute(`data-${attr}`);
  if (!searchAncestors || found) {
    return property(`dataset.${attr}`)(e) || e.getAttribute(`data-${attr}`);
  }
  return getDataAttribute(e.parentNode, attr, searchAncestors);
};

export default getDataAttribute;
